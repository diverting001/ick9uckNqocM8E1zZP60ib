<form id="indroserForm" action="index.php?app=b2c&ctl=admin_indorser&act=save"  method="POST" >
<input type="hidden" name="indorser_id" value="<{$indorser_info.indorser_id}>">
<div class="tableform">
	<div class="division">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
		  <th><{t}>背书人名称：<{/t}></th>
		  <td><{input type="text" name="indorser_name" style="width:120px" vtype="required" value=$indorser_info.indorser_name}><em><font color='red'>*</font></em></td>
		</tr>
    <tr>
      <th><{t}>背书人头衔：<{/t}></th>
      <td><{input type="text" name="indorser_title" style="width:120px" vtype="required" value=$indorser_info.indorser_title}><em><font color='red'>*</font></em></td>
    </tr>    
		<tr>
		  <th><{t}>背书人图片标识：<{/t}></th>
		  <td><{input type="image" name="indorser_logo"  value=$indorser_info.indorser_logo}></td>
		</tr>

		<tr>
		  <th><{t}>背书人背景图片：<{/t}></th>
		  <td><{input type="image" name="indorser_bklogo"  value=$indorser_info.indorser_bklogo}></td>
		</tr>

		<tr>
		  <th><{t}>背书人性别：<{/t}></th>
		  <td><{input type="select" name="sex" style="width:120px" vtype="required" options=$sexs value=$indorser_info.sex}><em><font color='red'>*</font></em></td>
		</tr>
    <tr>
      <th><{t}>国家：<{/t}></th>
      <td><{input type="text" name="indorser_country" style="width:120px" vtype="required" value=$indorser_info.indorser_country|default:'中国'}></td>
    </tr>
    <tr>
      <th><{t}>地区：<{/t}></th>
      <td><{input type="text" name="indorser_city" style="width:120px" vtype="required" value=$indorser_info.indorser_city}></td>
    </tr>    
		<tr>
		  <th><{t}>背书人星座：<{/t}></th>
		  <td><{input type="select" name="constellatory" style="width:120px" vtype="required" options=$constellatory value=$indorser_info.constellatory}><em><font color='red'>*</font></em></td>
		</tr>
		
		<tr>
		  <th><{t}>微博帐号：<{/t}></th>
		  <td><{input type="text" name="indorser_weibo" style="width:120px" vtype="required" value=$indorser_info.indorser_weibo}><em><font color='red'>*</font></em></td>
		</tr>
		<tr>
		  <th><{t}>背书人介绍：<{/t}></th>
		  <td><{input type="textarea" name="indorser_desc" cols="100" rows=5 value=$indorser_info.indorser_desc}></td>
		</tr>
		</table>
	</div>
<div class="division">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
  <th><{t}>网址：<{/t}></th>
  <td><{input type="text" name="addon[sns][site]" style="width:120px" value=$indorser_info.addon.sns.site}></td>
</tr>  
<tr>
  <th><{t}>新浪微博：<{/t}></th>
  <td><{input type="text" name="addon[sns][sina]" style="width:120px" value=$indorser_info.addon.sns.sina}></td>
</tr>
<tr>
  <th><{t}>Instagram：<{/t}></th>
  <td><{input type="text" name="addon[sns][instagram]" style="width:120px" value=$indorser_info.addon.sns.instagram}></td>
</tr>
<tr>
  <th><{t}>点点：<{/t}></th>
  <td><{input type="text" name="addon[sns][diandian]" style="width:120px" value=$indorser_info.addon.sns.diandian}></td>
</tr>
</table>
</div>  
  <div class="division" id="interviewForm">
      <div class="gridlist-action">
        <{button app="desktop" label=$___b2c="添加采访"|t:'b2c' class="addspec" id="addinterview" icon="btn_add.gif" }><!--<span class="notice-inline"></span>-->
      </div>
      
      <table border="0" cellspacing="0" cellpadding="0" class="gridlist sepc_value_table <{$spec.spec_type|default:'text'}>-spec-value-table">
        <thead>
         <tr>
            <th><{t}>采访问题<{/t}></th>
            <th><{t}>回答<{/t}></th>
            <th><{t}>操作<{/t}></th>
            <!--th><{t}>删除<{/t}></th-->
          </tr>
        </thead>
        <tbody>
        <{foreach from=$indorser_info.interview item=items key=key}>
        <tr>
            <td style="vertical-align:middle; text-align:center"><{input type="text" name="interview[{$key}][ask]" value=$items.ask style='width:180px;' maxlength='20'  vtype='required'}></td>
            <td style="vertical-align:middle; text-align:center"><{input type="textarea" cols="100" rows=5 name="interview[{$key}][answer]" value=$items.answer }></td>
            <td style="vertical-align:middle;">
                <{img app=desktop src='bundle/icon_asc.gif' class='asc'  title=$___b2c='向上移动'|t:'b2c' style="cursor:pointer;"}> &nbsp; &nbsp; 
                <{img app=desktop src='bundle/icon_desc.gif' class='desc' title=$___b2c='向下移动'|t:'b2c' style="cursor:pointer; width:13px; height:12px; margin-top:10px"}> &nbsp; &nbsp; 
                <{img app=desktop src='bundle/delete.gif' class='delete'  title=$___b2c='删除'|t:'b2c' style="cursor:pointer;" }>
            </td>
        </tr>
        <{/foreach}>
        </tbody>
      </table>
      </div>	
</div>
<div class="table-action">
	<{button type="submit"  label=$___b2c="保存"|t:'b2c'}>
</div>
<script>
	$('indroserForm').store('target',{
/*		onComplete:function(){
			if(opener.finderGroup['<{$env.get._finder.finder_id}>'])
			opener.finderGroup['<{$env.get._finder.finder_id}>'].refresh();
			window.close();
		}*/
	});
</script>
<script>
(function(){
    var new_spec_item = <{$total_interview|default:0}>;
    var spec_image_width = '<{$width}>';
    var spec_image_height = '<{$height}>';
    
    var interviewForm=$('interviewForm');
    var radio_spec_show_type=$$("#interviewForm input[name^=spec[spec_show_type]");
    var table_spec_value=$E("#interviewForm table.sepc_value_table");


    
    var bindEditEvent=function(row){
            var sel_image=row.getElement('span.sel_image');
            var asc=row.getElement('img.asc');
            var desc=row.getElement('img.desc');
            var del=row.getElement('img.delete');

            asc.addEvent('click',function(){
               var pre=row.getPrevious('tr');
               if(pre){
                  row.injectBefore(pre);
               }
            });
            desc.addEvent('click',function(){
                var next=row.getNext('tr');
                   if(next){
                      row.injectAfter(next);
                   }
            });
            del.addEvent('click',function(){

               if(confirm('<{t}>确认删除本行吗？<{/t}>')){
               		row.remove();
               }
            });
            
      };
    
    var IMP_UPLOAD_TMPL = '<{input type="image" name="{img_upload_name}" width=40 height=40}>';

    var getTemp = function(i){
        return '<td style="vertical-align:middle; text-align:center;"><{input type="text" name="interview[new_'+i+'][ask]" value="" style="width:180px;" maxlength="20"  vtype="required"}></td><td style="vertical-align:middle;"><{input type="textarea" cols="100" rows=5 name="interview[new_'+i+'][answer]" value="" }></td><td class="simg-col">'+IMP_UPLOAD_TMPL.replace('{img_upload_name}','spec[spec_value][new_'+i+'][spec_image]')+' </td><td style="vertical-align:middle;"><input type="hidden" name="spec[spec_value][new_'+i+'][spec_value_id]" value=""/><{img app=desktop src="bundle/icon_asc.gif" class="asc"  title=$___b2c="向上移动"|t:"b2c"  style="cursor:pointer;"}> &nbsp; &nbsp; <{img app=desktop src="bundle/icon_desc.gif" class="desc" title=$___b2c="向下移动"|t:"b2c"  style="cursor:pointer;"}> &nbsp; &nbsp; <{img app=desktop src="bundle/delete.gif" class="delete"  title=$___b2c="删除"|t:"b2c"  style="cursor:pointer;" }></td>';
    };
    
    $('addinterview').addEvent('click',function(e){
         var newRow=new Element('tr');
         newRow.inject($E('tbody',table_spec_value));
         newRow.setHTML(getTemp(new_spec_item++));
        if(table_spec_value.hasClass('text-spec-value-table')){
            newRow.getElement('.simg-col').set('styles',{'display':'none'});
        }else{
            newRow.getElement('.simg-col').set('styles',{'display':''});
        }
         bindEditEvent(newRow);
    });
   
      /*初始化规格设置项RADIO,VALUE*/

/*      $E('#interviewForm input[value=<{$spec.spec_type|default:'text'}>]').set('checked',true).fireEvent('click');
      $E('#interviewForm input[value=<{$spec.spec_show_type|default:'flat'}>]').set('checked',true);*/
      $ES('tbody tr',table_spec_value).each(bindEditEvent);
 
})();

</script>