<div id="picAddress" class="tableform">
    <div class="division">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <th width="20%"><{t}>自动轮播间隔：<{/t}></th>
                <td width="30%" >
                    <select name="effectTime">
                        <option value="3000" <{if $setting.effectTime=="3000"}>selected<{/if}>>快速</option>
                       <option value="8000" <{if $setting.effectTime=="8000"}>selected<{/if}>>中速</option>
                        <option value="12000" <{if $setting.effectTime=="12000"}>selected<{/if}>>慢速</option>
                    </select>
                </td>
                <th width="20%" >自动播放：</th>
                <td width="30%" >
                    <select name="autoplay">
                        <option value=true <{if $setting.autoplay=="true"}>selected<{/if}>>是</option>
                        <option value=false  <{if $setting.autoplay=="false"}>selected<{/if}>>否</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th width="20%"><{t}>图片切换速度：<{/t}></th>
                <td width="30%" >
                    <select name="effectSpeed">
                        <option value="300" <{if $setting.effectSpeed=="300"}>selected<{/if}>>快速</option>
                       <option value="800" <{if $setting.effectSpeed=="800"}>selected<{/if}>>中速</option>
                        <option value="1200" <{if $setting.effectSpeed=="1200"}>selected<{/if}>>慢速</option>
                    </select>
                </td>
                <th width="20%" >缩略图触发切换事件：</th>
                <td width="30%" >
                    <select name="events">
                        <option value="click" <{if $setting.events=="click"}>selected<{/if}>>鼠标点击</option>
                        <option value="mouseover"  <{if $setting.events=="mouseover"}>selected<{/if}>>鼠标移上</option>
                    </select>
                </td>
            </tr>
        </table>
        </div>
        <div class="division">
        说明:文字颜色、文字标题、文字内容 都可不填<br/>
        具体颜色的说明，可以看  http://code.ciaoca.com/jquery/cxslide/demo/ 自定义按钮内容模块<br/>
   图片上的加粗文字是 文字标题<br/>
   图片上的未加粗文字为文字内容<br/>
   图片上的文字颜色可以有文字颜色来控制，默认不填写为黑色
        </div>
    <div class="piccontent">
        <{foreach from=$setting.pic item=data key=key}>
        <table  width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <th><{t app="b2c"}>图片地址:<{/t}></th>
                <td>
                    <input type=hidden name=pic[<{$data.id}>][id] value="<{$data.id}>">
                    <input name='pic[<{$data.id}>][link]' class="imgsrc" id="pic[<{$data.id}>][link]"  value="<{$data.link}>">
                    <input type=button value=上传图片 class="uploadbtn">
                </td>
                <th><{t app="b2c"}>小图地址:<{/t}></th>
                <td><input name='pic[<{$data.id}>][small_link]' class="smallSrc" id="pic[<{$data.id}>][small_link]"  value="<{$data.small_link}>">
                    <input type=button value=上传图片 class="uploadbtn_sml">
                </td>
            </tr>
             <tr>
                 <th><{t app="b2c"}>链接地址:<{/t}></th>
                 <td>
                     <input name="pic[<{$data.id}>][linktarget]" value="<{$data.linktarget}>">
                 </td>
                <th><{t app="b2c"}>文字颜色:<{/t}></th>
                <td>
                    <input name="pic[<{$data.id}>][linkinfocolor]" value="<{$data.linkinfocolor}>">例如:red或者 #FF0000;
                </td>
            </tr>
            <tr>
                <th><{t app="b2c"}>文字标题<{/t}></th>
                <td>
                    <input name="pic[<{$data.id}>][linkinfotitle]" value="<{$data.linkinfotitle}>">
                </td>
                <th><{t app="b2c"}>文字内容<{/t}></th>
                <td>
                <input name="pic[<{$data.id}>][linkinfocontent]" value="<{$data.linkinfocontent}>">每个句子使用|分隔
                </td>
                <th><{t app="b2c"}>删除该图片及描述:<{/t}></th>
                <td><span onclick="$(this).getParent('table').destroy()"><{img src="bundle/delecate.gif" style="cursor:pointer;" alt=$___b2c="删除"|t:'b2c' title=$___b2c="删除"|t:'b2c' app="desktop"}></span></td>
            </tr>
        </table>
        <{/foreach}>
    </div>
    <{button label=$___b2c="添加图片"|t:'b2c' class="addimage" app="desktop" icon="btn_add.gif"}>
</div>
<script>
    (function(){
        var tag_type='table',tag_class='pic_items';

        document.getElement(".addimage").addEvent('click',function(){

            var i=new Date().getTime();

            var tpl='\
            <tr>\
                <th><{t app="b2c"}>图片地址:<{/t}></th>\
                <td><input type=hidden name=pic['+i+'][id] value="'+i+'"><input name="pic['+i+'][link]" class="imgsrc">\
                    <input type=button value=<{t app="b2c"}>上传图片<{/t}> class="uploadbtn" id="pic['+i+']">\
                </td>\
                <th><{t app="b2c"}>小图地址:<{/t}></th>\
                <td><input name=pic['+i+'][small_link] class="smallSrc">\
                  <input type=button value=<{t app="b2c"}>上传图片<{/t}> class="uploadbtn_sml" id="smallpic['+i+']">\
                </td>\
            </tr>\
            <tr>\
                <th><{t app="b2c"}>链接地址:<{/t}></th>\
                <td><input name="pic['+i+'][linktarget]"></td>\
                <th><{t app="b2c"}>文字颜色:<{/t}></th>\
                <td><input name="pic['+i+'][linkinfocolor]"></td>\
            </tr>\
            <tr>\
                <th><{t app="b2c"}>文字标题:<{/t}></th>\
                <td><input name="pic['+i+'][linkinfotitle]"></td>\
                <th><{t app="b2c"}>文字内容:<{/t}></th>\
                <td><input name="pic['+i+'][linkinfocontent]"></td>\
            </tr>\
            <tr>\
                <th><{t app="b2c"}>删除该图片及描述:<{/t}></th>\
                <td><span onclick="$(this).getParent(\'table\').destroy()"><{img src="bundle/delecate.gif" style="cursor:pointer;" alt=$___b2c="删除"|t:'b2c' title=$___b2c="删除"|t:'b2c' app="desktop"}></span></td>\
            </tr>';

            $('picAddress').getElement('.piccontent').adopt(new Element(tag_type,{'html':tpl,'width':'100%','class':tag_class}));

            $('pic['+i+']').addEvent('click',function(e){bindevent(this)});
            $('smallpic['+i+']').addEvent('click',function(e){bindevent_small(this)});
        });


            $$(".piccontent .uploadbtn").addEvent('click',function(e){bindevent(this)});
            $$(".small_piccontent .uploadbtn").addEvent('click',function(e){bindevent(this)});
            $$(".uploadbtn_sml").addEvent('click',function(e){bindevent_small(this)});

            function bindevent(el){
                var target=$(el).getParent(tag_type).getElement('.imgsrc');
                var url='index.php?app=desktop&act=alertpages&goto='+encodeURIComponent("index.php?app=image&ctl=admin_manage&act=image_broswer&type=big");
                Ex_Loader('modedialog',function(){
                    return new imgDialog(url,{onCallback:function(image_id,image_src){
                            target.value=image_src;
                    }});
                });
            }
            function bindevent_small(el){
              var target =$(el).getParent(tag_type).getElement('.smallSrc');
              var url='index.php?app=desktop&act=alertpages&goto='+encodeURIComponent("index.php?app=image&ctl=admin_manage&act=image_broswer&type=big");
              Ex_Loader('modedialog',function(){
                  return new imgDialog(url,{onCallback:function(image_id,image_src){
                      target.value=image_src;
                  }});
              });
            }
        })();
    </script>
